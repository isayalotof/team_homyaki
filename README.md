# Туристический портал "Путешествуй по России"

Проект представляет собой веб-приложение для туристического агентства, специализирующегося на турах по России.

## Основные функции

### Клиентская часть
- Просмотр доступных туров и фильтрация по различным параметрам
- Многошаговый поиск туров с Drag & Drop интерфейсом
- Бронирование туров с выбором дополнительных опций
- Личный кабинет пользователя
- Система отзывов о турах
- PWA (Progressive Web App) функционал для работы офлайн

### Административная часть
- Панель управления для менеджеров
- Управление турами (добавление, редактирование, удаление)
- Управление бронированиями и статусами заказов
- Система скидок и акций
- Аналитика и отчёты

## Технический стек

### Backend
- Python 3.9+
- FastAPI
- SQLAlchemy ORM
- PostgreSQL
- Alembic для миграций базы данных
- Pydantic для валидации данных

### Frontend
- HTML/CSS/JavaScript
- Bootstrap 5
- Jinja2 Templates
- Chart.js для визуализации данных

## Реализованные требования из ТЗ

1. ✅ Административная панель
   - Авторизация и разграничение прав доступа (админ, менеджер агентства, менеджер оператора)
   - Управление пользователями, турами, бронированиями
   - Аналитика и отчеты

2. ✅ Каталог туров
   - Фильтрация и сортировка
   - Детальная информация о турах
   - Система поиска туров

3. ✅ Бронирование туров
   - Выбор дополнительных опций
   - Расчет стоимости
   - Управление статусами бронирования

4. ✅ Пользовательские функции
   - Регистрация и авторизация
   - Личный кабинет
   - Избранные туры
   - Настройка профиля

5. ✅ Система отзывов
   - Оценки по шкале от 1 до 5
   - Текстовые отзывы
   - Модерация отзывов

6. ✅ Восстановление пароля
   - Отправка email с инструкциями по сбросу пароля
   - Создание нового пароля через токен

7. ✅ PWA функционал
   - Service Worker для кеширования и офлайн-доступа
   - Установка на домашний экран
   - Офлайн-страница с уведомлением о недоступности интернета

8. ✅ Многошаговый поиск туров с Drag & Drop
   - Визуальное построение маршрута с перетаскиванием
   - Пошаговое заполнение параметров тура
   - Визуализация построенного маршрута

## Не реализованные требования

1. ❌ Интеграция с платежной системой
   - Требуется подключение API платежной системы

2. ❌ Мобильное приложение для отзывов
   - Требуется разработка отдельного мобильного приложения

3. ❌ Интеграция с внешними поставщиками туров
   - Требуется подключение к API туроператоров

## Инструкция по запуску

### Запуск с Docker
```bash
docker-compose up -d
```

### Запуск вручную
1. Установите зависимости
```bash
cd backend
pip install -r requirements.txt
```

2. Настройте переменные окружения (создайте .env файл на основе примера)

3. Запустите миграции
```bash
alembic upgrade head
```

4. Запустите сервер
```bash
uvicorn app.main:app --reload
```

5. Откройте в браузере http://localhost:8000

### Демо-аккаунты
- Администратор: admin@example.com / admin
- Менеджер агентства: manager@example.com / manager
- Клиент: client@example.com / client

## Структура проекта

```
project/
├── backend/
│   ├── alembic/              # Миграции базы данных
│   ├── app/
│   │   ├── api/              # API эндпоинты
│   │   ├── core/             # Ядро приложения, конфигурация
│   │   ├── crud/             # CRUD операции
│   │   ├── db/               # Настройки базы данных
│   │   ├── models/           # SQLAlchemy модели
│   │   ├── schemas/          # Pydantic схемы
│   │   ├── services/         # Бизнес-логика
│   │   ├── static/           # Статические файлы
│   │   └── templates/        # HTML шаблоны
│   └── requirements.txt      # Зависимости
├── docker/                   # Docker настройки
└── docker-compose.yml        # Docker Compose файл
```

## Требования

- Docker и Docker Compose
- Git

## Запуск проекта

### 1. Клонирование репозитория

```bash
git clone <URL репозитория>
cd путешествуй-по-россии
```

### 2. Настройка переменных окружения

Создайте файл `.env` в корне проекта со следующим содержимым:

```
# PostgreSQL
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=russia_travel_db
POSTGRES_HOST=db
POSTGRES_PORT=5432

# Backend
DATABASE_URL=postgresql+psycopg2://postgres:postgres@db:5432/russia_travel_db
SECRET_KEY=your_secret_key_here_please_change_in_production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
BACKEND_CORS_ORIGINS=["http://localhost:80", "http://localhost:8080"]
```

Измените значения по своему усмотрению, особенно `SECRET_KEY`.

### 3. Запуск с Docker Compose

```bash
docker-compose up -d
```

### 4. Доступ к приложению

- Фронтенд: http://localhost:80
- API бэкенда: http://localhost:80/api
- Документация API: http://localhost:80/docs

### 5. Остановка проекта

```bash
docker-compose down
```

## Разработка

### Миграции базы данных

```bash
docker-compose exec backend alembic revision --autogenerate -m "Initial migration"
docker-compose exec backend alembic upgrade head
```

## Лицензия

[MIT](LICENSE) 